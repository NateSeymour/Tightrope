import{a as C,u as v,M as x}from"./intl-701a3446.js";import{d as E,u as N,Y as S,h as p,i as u,c as y,a as t,b as f,z as w,a0 as g,e as M,o as r,a1 as I,X as K,_ as Q}from"./index-2991d910.js";import{B as F,_ as z,M as D}from"./MaterialButton-2bb0f3a7.js";import{u as R}from"./MaterialOverlay.vue_vue_type_style_index_0_lang-4daae890.js";const T={class:"measurement-editor"},U={key:0},$=E({__name:"EditMeasurementView",setup(L){const b=N(),o=S(),c=o.params.metricName,a=parseInt(o.params.measurementId),i=p(0),m=p(0),l=C(),{data:e}=v({queryKey:["metric",c],queryFn:x.fetchMetricByName.bind(null,c)}),h=u(()=>!!e.value),{data:s}=v({queryKey:["measurement",a],queryFn:()=>e.value.fetchMeasurement(a),enabled:h}),V=u(()=>!!s.value),d=u(()=>e.value.useLocalizedUnit()),{mutate:k}=R({mutationFn:async()=>await e.value.updateMeasurement(a,m.value/d.value.conversion,i.value),onSuccess:()=>{l.invalidateQueries({queryKey:["metric",e.value.name]}),l.invalidateQueries({queryKey:["measurement",a]}),b.back()},enabled:V});function q(n){i.value=n.getTime()}function B(n){m.value=n}return(n,_)=>(r(),y("div",T,[t(e)&&t(s)?(r(),y("div",U,[f(F,{onDateSelected:q,class:"best-calendar",hint:t(s).millis},null,8,["hint"]),f(z,{onValueSelected:B,metric:t(e),hint:t(s).value*t(d).conversion},null,8,["metric","hint"]),t(e)?(r(),w(D,{key:0,onClick:_[0]||(_[0]=X=>t(k)()),class:"log-btn"},{default:g(()=>[I(" Update "+K(t(e).name),1)]),_:1})):M("",!0)])):M("",!0)]))}});const H=Q($,[["__scopeId","data-v-fdd7ce16"]]);export{H as default};
