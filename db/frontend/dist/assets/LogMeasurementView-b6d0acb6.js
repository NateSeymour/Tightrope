import{a as g,u as V,M as k}from"./intl-701a3446.js";import{d as B,u as C,Y as x,h as c,i,c as l,b as m,a as t,e as d,z as N,a0 as S,o as s,a1 as L,X as h,_ as w}from"./index-2991d910.js";import{_ as q,M as Q,B as z}from"./MaterialButton-2bb0f3a7.js";import{u as D}from"./MaterialOverlay.vue_vue_type_style_index_0_lang-4daae890.js";const E={class:"measurement-logger"},F={key:0},R=B({__name:"LogMeasurementView",setup(T){const _=C(),n=x().params.metricName,o=c(0),u=c(0),p=g(),{data:e}=V({queryKey:["metric",n],queryFn:k.fetchMetricByName.bind(null,n)}),v=i(()=>!!e.value),f=i(()=>e.value.useLocalizedUnit()),{mutate:y}=D({mutationFn:()=>e.value.postMeasurement(u.value/f.value.conversion,o.value),onSuccess:()=>{p.invalidateQueries([e,"measurements"]),_.back()},enabled:v});function M(a){o.value=a.getTime()}function b(a){u.value=a}return(a,r)=>(s(),l("div",E,[m(z,{onDateSelected:M,class:"best-calendar"}),t(e)?(s(),l("div",F,[m(q,{onValueSelected:b,metric:t(e)},null,8,["metric"])])):d("",!0),t(e)?(s(),N(Q,{key:1,onClick:r[0]||(r[0]=I=>t(y)()),class:"log-btn"},{default:S(()=>[L(" Log "+h(t(e).name),1)]),_:1})):d("",!0)]))}});const j=w(R,[["__scopeId","data-v-0ceab159"]]);export{j as default};
