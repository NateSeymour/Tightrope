import{d as b,o as c,c as i,b as h,f as r,X as y,a as n,_ as d,u as g,h as Q,i as M,e as v,F as T,r as Z,z as $,Y as B}from"./index-2991d910.js";import{d as F,a as S,u as q,M as E}from"./intl-701a3446.js";import{_ as N,T as I}from"./TrackerTimeFrameSelector-774051d9.js";import{_ as H,u as z}from"./MaterialOverlay.vue_vue_type_style_index_0_lang-4daae890.js";const K={class:"weight-el"},D={class:"content"},L=b({__name:"MeasurementEl",props:{metric:null,measurement:null},emits:["click","select"],setup(l,{emit:t}){const u=l,o=u.metric.useLocalizedUnit(),e=u.measurement.value*o.conversion;return(p,s)=>(c(),i("tr",K,[h(H,{onClick:s[0]||(s[0]=_=>t("click")),onSelect:s[1]||(s[1]=_=>t("select",_)),selectable:!0}),r("div",D,[r("span",null,y(n(F).format(u.measurement.millis)),1),r("span",null,y(e)+" "+y(n(o).short),1)])]))}});const R=d(L,[["__scopeId","data-v-5830837b"]]),A={},O={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},U=r("path",{d:"M13.05 42q-1.25 0-2.125-.875T10.05 39V10.5H8v-3h9.4V6h13.2v1.5H40v3h-2.05V39q0 1.2-.9 2.1-.9.9-2.1.9Zm21.9-31.5h-21.9V39h21.9Zm-16.6 24.2h3V14.75h-3Zm8.3 0h3V14.75h-3Zm-13.6-24.2V39Z"},null,-1),X=[U];function Y(l,t){return c(),i("svg",O,X)}const j=d(A,[["render",Y]]),G={class:"measurement-table"},J={key:0,class:"controls"},P={class:"wrapper"},W={key:1},ee=b({__name:"MeasurementTable",props:{metric:null},setup(l){const t=l,u=g(),o=S(),e=Q([]),p=M(()=>e.value.length),{data:s}=q({queryKey:["metric",t.metric.name,"measurements"],queryFn:t.metric.fetchMeasurements}),_=M(()=>!!s.value),{mutate:w}=z({mutationFn:async({measurement_id:a})=>t.metric.deleteMeasurement(a),onSuccess:()=>{o.invalidateQueries({queryKey:["metric",t.metric.name,"measurements"]})},enabled:_});function V(a){u.push(`/edit/${t.metric.name}/${a.measurement_id}`)}function x(a,f){a?e.value.push(f):e.value.splice(e.value.indexOf(f),1)}function C(){e.value.forEach(a=>{w(a)}),e.value=[]}return(a,f)=>(c(),i("div",G,[n(p)?(c(),i("div",J,[r("div",P,[h(j,{onClick:C,class:"delete-icon"})])])):v("",!0),n(s)?(c(),i("table",W,[(c(!0),i(T,null,Z(n(s).slice().reverse(),m=>(c(),$(R,{onClick:k=>V(m),onSelect:k=>x(k,m),measurement:m,metric:l.metric,key:m.millis+m.value},null,8,["onClick","onSelect","measurement","metric"]))),128))])):v("",!0)]))}});const te=d(ee,[["__scopeId","data-v-d44bbbd5"]]),se={},ne={xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 96 960 960",width:"48"},ce=r("path",{d:"M453 776h60V610h167v-60H513V376h-60v174H280v60h173v166Zm27.266 200q-82.734 0-155.5-31.5t-127.266-86q-54.5-54.5-86-127.341Q80 658.319 80 575.5q0-82.819 31.5-155.659Q143 347 197.5 293t127.341-85.5Q397.681 176 480.5 176q82.819 0 155.659 31.5Q709 239 763 293t85.5 127Q880 493 880 575.734q0 82.734-31.5 155.5T763 858.316q-54 54.316-127 86Q563 976 480.266 976Zm.234-60Q622 916 721 816.5t99-241Q820 434 721.188 335 622.375 236 480 236q-141 0-240.5 98.812Q140 433.625 140 576q0 141 99.5 240.5t241 99.5Zm-.5-340Z"},null,-1),re=[ce];function oe(l,t){return c(),i("svg",ne,re)}const ae=d(se,[["render",oe]]),ie={class:"metric-tracker"},le={class:"chart-container"},ue={class:"log-controls"},_e=b({__name:"MetricTrackerView",setup(l){const t=B(),u=g(),o=t.params.metricName,{data:e}=q({queryKey:["metric",o],queryFn:E.fetchMetricByName.bind(null,o)});return(p,s)=>(c(),i("div",ie,[h(I),r("div",le,[n(e)?(c(),$(N,{key:0,metric:n(e)},null,8,["metric"])):v("",!0)]),n(e)?(c(),$(te,{key:0,metric:n(e),class:"measurement-list"},null,8,["metric"])):v("",!0),r("div",ue,[r("button",{onClick:s[0]||(s[0]=_=>n(u).push(`/log/${n(o)}`))},[h(ae,{class:"add-circle"})])])]))}});const pe=d(_e,[["__scopeId","data-v-74ecdbcb"]]);export{pe as default};
